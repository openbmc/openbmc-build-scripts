{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "28a3453b_60294334",
        "filename": "scripts/unit-test.py",
        "patchSetId": 1
      },
      "lineNbr": 777,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-01-13T12:35:04Z",
      "side": 1,
      "message": "Why is / chosen over /usr or the default (/usr/local?)?  This seems non-standard.",
      "revId": "1473542e4f435a87c023d1b8c4521694403fe657",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3bb2c779_727b55f7",
        "filename": "scripts/unit-test.py",
        "patchSetId": 1
      },
      "lineNbr": 777,
      "author": {
        "id": 1000937
      },
      "writtenOn": "2023-01-13T13:03:31Z",
      "side": 1,
      "message": "From the cmake doc, user is able to use absolute path in destination.\nIf we use non root directory, wouldn\u0027t it be an issue?\n\nFor example: If user specifies destination as below and we also use `/usr/local` as prefix. \n```\ninstall (\n    DESTINATION /usr/local/bin\n)\n```\nThen I think the output directory will become `/usr/local/usr/local/bin`",
      "parentUuid": "28a3453b_60294334",
      "revId": "1473542e4f435a87c023d1b8c4521694403fe657",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ab9f566_ea21a429",
        "filename": "scripts/unit-test.py",
        "patchSetId": 1
      },
      "lineNbr": 777,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-01-13T14:56:14Z",
      "side": 1,
      "message": "```\ninstall (\n    DESTINATION /usr/local/bin\n)\n```\n\nWhy would anyone do this?  This is an ill-formed CMake file if you are explicitly setting a full install path to your DESTINATION.  It should always be based on a variable like ${CMAKE_INSTALL_BINDIR}.\n\nI guess a meta question is why did you add `--install-prefix`?  The default should be `/usr/local`.  Is that not sufficient?  If not, why not and how do you know?  I think the answer to these questions will lead us to the right value to place here.",
      "parentUuid": "3bb2c779_727b55f7",
      "revId": "1473542e4f435a87c023d1b8c4521694403fe657",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7831d8d0_7c57955a",
        "filename": "scripts/unit-test.py",
        "patchSetId": 1
      },
      "lineNbr": 777,
      "author": {
        "id": 1000937
      },
      "writtenOn": "2023-01-16T01:21:54Z",
      "side": 1,
      "message": "\u003e Why would anyone do this? This is an ill-formed CMake file if you are explicitly setting a full install path to your DESTINATION.\n\nThanks for informing me this. I don\u0027t know that is ill-formed.\n\n---\n\n\u003e It should always be based on a variable like ${CMAKE_INSTALL_BINDIR}.\n\nIn my case it based on the `${CMAKE_CURRENT_BINARY_DIR}`.\n\n```\nset(CMAKE_INSTALL_PREFIX \"${CMAKE_CURRENT_BINARY_DIR}/${LIB_NAME}/usr/\"\n\t\t\t\t\tCACHE STRING \"Default installation directory.\")\n```\n\nSo it installs the library under the repository directory instead of `/usr`\n\n---\n\n\u003e I guess a meta question is why did you add --install-prefix?\n\nThe explaination above is the reason.\n\n----\n\nI think I understand your concern now.\nHowever my case doesn\u0027t use `/usr` nor `/usr/local` as default. The only solution I found is to change the `--prefix`\nDo you have any suggestion for these cases?",
      "parentUuid": "3ab9f566_ea21a429",
      "revId": "1473542e4f435a87c023d1b8c4521694403fe657",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "014e7349_90c3cea4",
        "filename": "scripts/unit-test.py",
        "patchSetId": 1
      },
      "lineNbr": 777,
      "author": {
        "id": 1000937
      },
      "writtenOn": "2023-01-16T10:15:15Z",
      "side": 1,
      "message": "Removed `check_call_cmd(\"cmake\", \"--install-prefix\", \"/\")`.\nSince this should be take care by the repo itself. Not the unit-test script",
      "parentUuid": "7831d8d0_7c57955a",
      "revId": "1473542e4f435a87c023d1b8c4521694403fe657",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}